var g=Object.defineProperty;var P=(d,r,t)=>r in d?g(d,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[r]=t;var u=(d,r,t)=>(P(d,typeof r!="symbol"?r+"":r,t),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))f(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&f(p)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function f(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();class k{constructor(r,t){u(this,"points");switch(this.suit=r,this.figure=t,t){case"J":case"Q":case"K":{this.points=10;break}case"A":{this.points=11;break}default:{this.points=parseInt(t);break}}}}(()=>{const[d,r,t]=document.querySelector(".buttons-container").children,[f,a]=document.querySelectorAll(".points-counters"),[s,p]=document.querySelectorAll(".card-container");let e;r.disabled=!0,t.disabled=!0;let m=function(){const o=[s,p],i=[e.humanPlayer,e.dealer];o.forEach(l=>{for(;l.firstChild;)l.removeChild(l.firstChild)}),i.forEach((l,n)=>{l.cards.forEach(h=>{let c=document.createElement("img");c.className="w-25 d-inline-block card",c.src=`/images/cards/${h.figure}${h.suit}.png`,o[n].append(c)})}),f.innerText=e.humanPlayer.points,a.innerText=e.dealer.points};t.addEventListener("click",()=>{r.disabled=!0,t.disabled=!0;let o=Math.random()<.2;if(e.dealer.points<=16){const n=e.deck.pop();n.figure==="A"&&(n.points=n.points+e.dealer.points<=21?11:1),e.dealer.addCard(n)}for(;o&&e.dealer.points<=21;){const n=e.deck.pop();n.figure==="A"&&(n.points=n.points+e.dealer.points<=21?11:1),e.dealer.addCard(n),o=Math.random()<.2}m();const i=e.dealer.points<=21&&e.humanPlayer.points===e.dealer.points,l=e.dealer.points<=21&&e.humanPlayer.points<e.dealer.points;setTimeout(()=>{alert(i?"It's a draw":l?"You lose!":"You win!")},500)}),d.addEventListener("click",()=>{t.disabled=!1,r.disabled=!1,e=new b(new C,new C),e.deck=_.shuffle(e.deck),e.humanPlayer.addCard(e.deck.pop()),e.humanPlayer.addCard(e.deck.pop()),e.dealer.addCard(e.deck.pop()),e.dealer.addCard(e.deck.pop()),m(),alert("A new match will start")}),r.addEventListener("click",()=>{const o=e.deck.pop();o.figure==="A"&&(o.points=confirm("Do you want a value of 11 points for your card?")?11:1),e.humanPlayer.addCard(o);const i=21<e.humanPlayer.points;m(),setTimeout(()=>{i&&(t.disabled=!0,r.disabled=!0,alert("You lose!"))},500)});class b{constructor(i,l){u(this,"deck",[]);u(this,"dealer");u(this,"humanPlayer");this.humanPlayer=i,this.dealer=l;const n=["C","D","H","S"],h=[...[...Array(11).keys()].filter(c=>c>1),"J","Q","K","A"];this.deck=h.map(c=>n.map(y=>new k(y,c))).reduce((c,y)=>y.concat(c))}}class C{constructor(){u(this,"cards",[]);u(this,"points",0)}addCard(i){this.cards.push(i),this.points+=i.points}removeAllCard(){this.cards=[],this.points=0}}})();
